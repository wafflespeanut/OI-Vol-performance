<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Cursor Focus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./dist/uPlot.min.css">
</head>

<body>
    <script src="./dist/uPlot.iife.min.js"></script>
    <script>
        let response = { "assets": ["OGN", "BTC", "MTL", "ETH", "GMT", "FIL", "RSR", "SOL", "BAT", "AUDIO", "EOS", "KNC", "FTT", "LUNA", "ALICE", "ZIL", "NEAR", "IMX", "XRP", "DUSK", "APE", "ETC", "API3", "DOGE", "C98", "LINK", "CELR", "SHIB", "VET", "WAVES", "DOT", "CTK", "AVAX", "TOMO", "LTC", "LINA", "WOO", "ADA", "KSM", "BNB", "BLZ", "FTM", "GALA", "CTSI", "RUNE", "BEL", "RLC", "ICP", "OCEAN", "AXS", "DODO", "COMP", "SAND", "BAND", "REN", "BCH", "MATIC", "SC", "ATOM", "SKL", "XMR", "AAVE", "CVC", "SUSHI", "DENT", "MANA", "KAVA", "ZEC", "GTC", "XTZ", "COTI", "DYDX", "NEO", "CRV", "FLM", "ANT", "LRC", "MKR", "PEOPLE", "TLM", "THETA", "UNFI", "TRX", "NKN", "IOST", "CHZ", "BTS", "ARPA", "ALGO", "MASK", "ENJ", "SNX", "XLM", "UNI", "ONE", "TRB", "QTUM", "CHR", "CELO", "ENS", "ZEN", "EGLD", "STORJ", "OMG", "HOT", "ROSE", "ALPHA", "GRT", "STMX", "SRM", "1INCH", "DGB", "DASH", "AKRO", "XEM", "ANC", "ATA", "ONT", "RVN", "REEF", "YFI", "BAKE", "BAL", "SXP", "LPT", "AR", "ICX", "HBAR", "LIT", "HNT", "ANKR", "FLOW", "ZRX", "BNX", "SFP", "IOTA", "RAY", "DEFI", "KLAY", "XEC", "IOTX", "BTCDOM"], "oi": [[1650188085, 1650188102, 1650189020], [146, 146, 146], [44, 44, 39], [145, 145, 145], [36, 36, 34], [144, 144, 144], [143, 143, 143], [142, 142, 142], [106, 106, 104], [141, 141, 139], [140, 140, 141], [136, 136, 136], [139, 139, 140], [138, 138, 138], [85, 85, 84], [137, 137, 137], [135, 135, 135], [116, 116, 115], [134, 134, 133], [53, 53, 54], [133, 133, 134], [132, 132, 130], [127, 127, 127], [131, 131, 131], [72, 72, 68], [130, 130, 132], [120, 120, 120], [129, 129, 128], [101, 101, 100], [128, 128, 129], [97, 97, 98], [35, 35, 36], [126, 126, 125], [49, 49, 42], [125, 125, 126], [109, 109, 108], [124, 124, 124], [123, 123, 122], [37, 37, 37], [122, 122, 121], [7, 7, 7], [121, 121, 123], [63, 63, 60], [74, 74, 73], [119, 119, 119], [112, 112, 110], [118, 118, 118], [117, 117, 117], [102, 102, 105], [115, 115, 116], [8, 8, 8], [114, 114, 112], [113, 113, 111], [30, 30, 28], [111, 111, 114], [110, 110, 113], [39, 39, 43], [24, 24, 22], [108, 108, 109], [12, 12, 12], [107, 107, 107], [67, 67, 69], [54, 54, 55], [105, 105, 103], [78, 78, 77], [104, 104, 101], [32, 32, 30], [103, 103, 106], [71, 71, 70], [100, 100, 102], [81, 81, 81], [99, 99, 99], [11, 11, 10], [98, 98, 96], [45, 45, 44], [96, 96, 97], [95, 95, 94], [82, 82, 78], [94, 94, 93], [89, 89, 86], [93, 93, 92], [51, 51, 51], [92, 92, 95], [13, 13, 14], [91, 91, 91], [90, 90, 87], [83, 83, 85], [88, 88, 90], [87, 87, 89], [27, 27, 29], [86, 86, 88], [64, 64, 64], [84, 84, 82], [17, 17, 16], [9, 9, 11], [40, 40, 40], [80, 80, 83], [76, 76, 74], [79, 79, 79], [6, 6, 6], [77, 77, 80], [75, 75, 76], [10, 10, 9], [73, 73, 75], [41, 41, 45], [70, 70, 72], [60, 60, 61], [69, 69, 71], [33, 33, 35], [68, 68, 67], [55, 55, 52], [19, 19, 19], [66, 66, 63], [52, 52, 53], [65, 65, 66], [62, 62, 62], [61, 61, 65], [59, 59, 59], [58, 58, 58], [57, 57, 57], [56, 56, 56], [38, 38, 38], [50, 50, 48], [29, 29, 31], [14, 14, 13], [48, 48, 47], [16, 16, 15], [47, 47, 46], [42, 42, 41], [46, 46, 50], [18, 18, 18], [43, 43, 49], [25, 25, 23], [34, 34, 32], [28, 28, 27], [31, 31, 33], [22, 22, 24], [26, 26, 25], [23, 23, 26], [21, 21, 21], [20, 20, 20], [15, 15, 17], [5, 5, 5]], "vol": [[1650188085, 1650188102, 1650189020], [139, 139, 139], [146, 146, 146], [141, 141, 141], [145, 145, 144], [144, 144, 145], [143, 143, 143], [113, 113, 113], [142, 142, 142], [111, 111, 111], [118, 118, 118], [140, 140, 140], [135, 135, 135], [116, 116, 117], [138, 138, 138], [124, 124, 125], [137, 137, 137], [136, 136, 136], [103, 103, 103], [134, 134, 134], [63, 63, 63], [133, 133, 133], [132, 132, 132], [79, 79, 79], [131, 131, 130], [88, 88, 87], [130, 130, 131], [96, 96, 97], [129, 129, 129], [114, 114, 115], [128, 128, 128], [127, 127, 127], [60, 60, 60], [126, 126, 126], [49, 49, 49], [125, 125, 124], [71, 71, 72], [46, 46, 46], [123, 123, 123], [98, 98, 99], [122, 122, 122], [23, 23, 23], [121, 121, 121], [120, 120, 120], [24, 24, 25], [119, 119, 119], [27, 27, 27], [43, 43, 43], [117, 117, 116], [35, 35, 35], [115, 115, 114], [86, 86, 86], [101, 101, 101], [112, 112, 112], [54, 54, 55], [65, 65, 65], [110, 110, 110], [109, 109, 109], [22, 22, 22], [108, 108, 108], [73, 73, 75], [107, 107, 107], [106, 106, 106], [38, 38, 37], [105, 105, 105], [61, 61, 61], [104, 104, 104], [89, 89, 89], [102, 102, 102], [42, 42, 42], [100, 100, 100], [62, 62, 62], [99, 99, 98], [76, 76, 76], [97, 97, 96], [26, 26, 26], [40, 40, 39], [95, 95, 95], [82, 82, 82], [94, 94, 93], [91, 91, 91], [93, 93, 94], [12, 12, 12], [92, 92, 92], [15, 15, 15], [74, 74, 74], [90, 90, 90], [7, 7, 7], [21, 21, 19], [87, 87, 88], [58, 58, 58], [85, 85, 85], [77, 77, 77], [84, 84, 83], [83, 83, 84], [81, 81, 81], [10, 10, 10], [80, 80, 80], [59, 59, 59], [78, 78, 78], [53, 53, 52], [39, 39, 40], [75, 75, 73], [44, 44, 45], [72, 72, 71], [52, 52, 51], [70, 70, 70], [64, 64, 64], [69, 69, 69], [25, 25, 24], [68, 68, 67], [67, 67, 68], [14, 14, 13], [66, 66, 66], [18, 18, 18], [16, 16, 16], [57, 57, 57], [8, 8, 9], [29, 29, 29], [32, 32, 32], [41, 41, 41], [56, 56, 56], [55, 55, 54], [51, 51, 53], [50, 50, 50], [9, 9, 8], [48, 48, 48], [28, 28, 28], [47, 47, 47], [36, 36, 38], [45, 45, 44], [33, 33, 33], [37, 37, 36], [30, 30, 30], [34, 34, 34], [19, 19, 21], [31, 31, 31], [13, 13, 14], [6, 6, 6], [17, 17, 17], [11, 11, 11], [20, 20, 20], [5, 5, 5]] }
        let symbols = response["assets"];
        let oi_data = response["oi"];
        let vol_data = response["vol"];

        const fmtDate = uPlot.fmtDate("{HH}:{mm}");
        const tzDate = ts => uPlot.tzDate(new Date(ts * 1e3), "Etc/UTC");

        const prepareChartOpts = (title, alpha, series) => {
            return {
                width: (screen.width * 0.9) / 2,
                height: (screen.height * 0.8) / 2,
                title: title,
                tzDate,
                hooks: {
                    setSeries: [
                        (u, seriesIdx) => {
                            u.series.forEach((s, i) => {
                                s.width = i == seriesIdx ? 2 : 1;
                            });
                        }
                    ]
                },
                focus: {
                    alpha,
                },
                cursor: {
                    focus: {
                        prox: 30,
                    }
                },
                scales: {
                    x: {},
                    y: {
                        range: [symbols.length - 30, symbols.length + 10],
                    }
                },
                series: [
                    {
                        label: "Time",
                        value: (u, ts) => fmtDate(tzDate(ts)),
                    },
                    ...series,
                ],
            }
        }

        let u1 = new uPlot(prepareChartOpts('OI/Volume ranking', 0.3, symbols.map(v => {
            return {
                label: v,
                stroke: "black",
            }
        })), oi_data, document.body);
    </script>
</body>

</html>
